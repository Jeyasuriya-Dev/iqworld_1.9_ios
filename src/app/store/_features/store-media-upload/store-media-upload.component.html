<section class="content">
    <div *ngIf="isNeedVerification && customer?.versionMaster?.version=='PRO'"
        style="position: fixed; bottom: 35px; right: 25px; z-index: 100;">
        <!-- <ng-template *ngIf="isNeedVerification && customer?.versionMaster?.version=='PRO'"> -->
        <!-- <button mat-mini-fab color="primary" title="new releases">
        <mat-icon>new_releases</mat-icon>
      </button> -->
        <button (click)="verifyLayOuts()" class="btn btn-outline-success">Save layouts</button>
        <!-- </ng-template> -->
    </div>
    <div *ngIf="!scheduleInfo?.isapproved &&userRole=='SUBUSER'" class="d-flex"
        style="position: fixed; z-index: 100;  bottom: 35px; right: 25px;">
        <div class="example-button-container">
            <button (click)="stopScheduleByUser()" mat-raised-button color="primary"
                aria-label="Example icon button with a delete icon">
                Cancel Schedule
            </button>
        </div>
    </div>
    <div *ngIf="!scheduleInfo?.isapproved &&userRole!='SUBUSER'" class="d-flex"
        style="position: fixed; z-index: 100;  bottom: 35px; right: 25px;">
        <div class="example-button-container">
            <button (click)="approvePlaylistSchedule(true)" mat-raised-button color="primary"
                aria-label="Example icon button with a delete icon">
                <mat-icon>done</mat-icon> Approve
            </button>
        </div>
        &nbsp; &nbsp;
        <div class="example-button-container">
            <button (click)="approvePlaylistSchedule(false)" mat-raised-button color="accent"
                aria-label="Example icon button with a bookmark icon">
                <mat-icon>clear</mat-icon> Reject
            </button>
        </div>
    </div>
    <div *ngIf="selectedAllMedia || checkedMediaForm.get('media')?.value.length!=0" class=""
        style="position: fixed; z-index: 100;  bottom: 35px; right: 25px;">
        <div class="example-button-container mb-1">
            <button (click)="duplicateMedia(mediaRepeat)" mat-mini-fab color="warn" title="Duplication Of Media Files">
                <mat-icon><i class='bx bxs-duplicate'></i></mat-icon>
            </button>
        </div>
        <div class="example-button-container mb-1">
            <button (click)="deleteOrRotateFile('delete')" mat-mini-fab color="primary"
                title="Deletion Of Media Files ">
                <mat-icon>delete</mat-icon>
            </button>
        </div>
        <div class="example-button-container">
            <button (click)="deleteOrRotateFile('rotate')" mat-mini-fab color="accent" title="Rotation Of Media Files">
                <mat-icon>autorenew</mat-icon>
            </button>
        </div>
    </div>
    <!-- <div class="fab-upload">
      <div id="circularMenu1" class="circular-menu circular-menu-left">
        <a class="floating-btn" onclick="document.getElementById('circularMenu1').classList.toggle('active');">
          <i class="fa fa-plus"></i>
        </a>
        <menu class="items-wrapper">
          <a class="menu-item "></a>
          <a class="menu-item "></a>
          <a class="menu-item "><img src="assets/images/ppp.png" alt="polotno" srcset=""></a>
          <a class="menu-item"> <img (click)="addMore()" src="assets/images/vista.png" alt="vista" srcset=""></a>
        </menu>
      </div>
    </div> -->

    <div class="row g-4">
        <div class="col-sm-12">
            <mat-card class="mb-2">
                <mat-card-content>
                    <div class="person" style="--data-color: #2f87e2">
                        <span *ngIf="mediatype==4" style="position: absolute; top: 2.3%; right: 2%;">
                            <mat-slide-toggle (change)="setDefault($event,playlist)"
                                [disabled]="!scheduleInfo?.isapproved"
                                [checked]="playlist?.isactive && playlist?.isverified"></mat-slide-toggle>
                        </span>
                        <div style="display: flex; align-items: center;">
                            <!-- (keydown)="enforceMaxLength($event)" -->
                            <h3 id="playlistnameedited" style="word-break: break-all;" [contentEditable]="isEditable"
                                [ngStyle]="{'text-decoration':isEditable? 'underline 3px #2f87e2':'','color':isEditable? '#2f87e2':''}">
                                {{playlist?.filename}}
                            </h3> &nbsp; <span *ngIf="!isEditable" (click)="setIsEditableTrue(true)"
                                style="font-size: medium;   margin-bottom: 1em; color: #2f87e2;"><i
                                    class="fa fa-pencil-square-o" aria-hidden="true"></i>
                            </span>
                            <span *ngIf="isEditable" (click)="savePlaylistname(false)" title="Cancel"
                                style="font-size: medium; margin-left: 2em; margin-bottom: 1em; color: rgb(236, 70, 41);">
                                <i class="fa fa-times-circle" aria-hidden="true"></i>
                            </span>
                            <span *ngIf="isEditable" (click)="savePlaylistname(true)" title="Save"
                                style="font-size: medium; margin-left: 0.5em; margin-bottom: 1em; color: rgb(4, 161, 4);">
                                <i class="fa fa-check" aria-hidden="true"></i>
                            </span>
                        </div>
                        <!-- <h3 [contentEditable]="isEditable">{{playlist?.filename}} <span (click)="setIsEditableTrue()" style="font-size: medium; color: blue;"><i
                    class="fa fa-pencil-square-o" aria-hidden="true"></i>
                </span>
  
                <span class={{scheduleFormater()}} style="font-size: x-small;">({{scheduleFormater()}})</span>
              </h3> -->
                        <div class="row">
                            <div class="col-sm-6 col-12 mt-1">
                                <dl class="attributes">
                                    <dt>Category</dt>
                                    <dd>: {{playlist?.categoryname}}</dd>
                                    <dt *ngIf="mediatype!=4">Start-Date</dt>
                                    <dd *ngIf="mediatype!=4">: {{playlist?.sch_start_time | date:'medium' }}</dd>

                                    <dt>Scroller</dt>
                                    <dd> :
                                        <label class="switch switch-green">
                                            <input #switch (click)="enableScroller(switch)" type="checkbox"
                                                [disabled]="isScrollBtnClicked || !scheduleInfo?.isapproved || isScheduleDone()"
                                                [checked]="playlist?.isscroller" class="switch-input">
                                            <span class="switch-label" data-on="On" data-off="Off"></span>
                                            <span class="switch-handle"></span>
                                        </label>

                                        <span style="color: #f86d6d;" *ngIf="playlist?.isscroller"> | </span>

                                        <label *ngIf="playlist?.isscroller">
                                            <!-- <button (click)="createNewScroller()" mat-stroked-button color="accent"></button> -->
                                            <a class="newsroller"
                                                (click)="isScheduleDone() ?'': scheduleInfo?.isapproved ? createNewScroller() :''"
                                                style="color: rgb(12, 99, 99);">+ New
                                                Scroller</a>
                                        </label>

                                    </dd>

                                </dl>
                            </div>
                            <div class="col-sm-6 col-12 mt-1">
                                <br *ngIf="isMoblie">
                                <dl class="attributes">
                                    <dt *ngIf="mediatype!=4">Duration</dt>
                                    <dd *ngIf="mediatype!=4">: {{playlist?.duration}} (hr:mm:ss)</dd>
                                    <dt *ngIf="mediatype!=4">End-Date</dt>
                                    <dd *ngIf="mediatype!=4">: {{playlist?.sch_end_time | date:'medium'}}</dd>
                                </dl>
                            </div>
                        </div>
                        <br>
                        <div *ngIf="playlist?.isscroller" class="row">
                            <div class="col-12 col-md-3 col-sm-12">
                                <mat-form-field appearance="outline" [ngStyle]="{'width': isMoblie ? '100%' : '60%' }">
                                    <mat-label>Add Scroller</mat-label>
                                    <mat-select #selectScroller multiple [(ngModel)]="selectedOptions">
                                        <div class="select-all">
                                            <mat-checkbox [(ngModel)]="allSelected"
                                                [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                                [ngModelOptions]="{standalone: true}"
                                                (change)="toggleAllSelection()">Select All</mat-checkbox>
                                        </div>
                                        <mat-option (click)="optionClick()" *ngFor="let item of this.scrollList"
                                            [value]="item.id"
                                            [disabled]="item?.id==0 || !scheduleInfo?.isapproved ||isScheduleDone()">
                                            {{item?.name}}
                                        </mat-option>
                                        <div class="d-flex justify-content-center mb-2">
                                            <button mat-raised-button color="warn"
                                                (click)="addScrollListToPlaylist(selectScroller)">Save</button>
                                        </div>
                                    </mat-select>
                                </mat-form-field>

                            </div>
                            <div class="col-12 col-md-3 col-sm-12">
                                <mat-form-field appearance="outline" [ngStyle]="{'width': isMoblie ? '100%' : '60%' }">
                                    <mat-label>Scroller Position</mat-label>

                                    <mat-select [(ngModel)]="selectedScroller"
                                        (selectionChange)="changeScrollerPosition()">
                                        <mat-option *ngFor="let item of this.ScrollerTypeList"
                                            [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                            [value]="item?.id">
                                            {{item?.type}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <hr style="color: rgba(128, 128, 128, 0.685);">
                        <div id="controlles" class="row justify-content-center">
                            <div class="col-12 col-md-2 col-sm-12">
                                <div style="color: #2f87e2; margin-bottom: 3px;">
                                    Category:
                                </div>
                                <div>
                                    <mat-form-field appearance="outline">
                                        <mat-label>Choose Category</mat-label>
                                        <mat-select #selectCategory multiple [(ngModel)]="selectedCategories">
                                            <mat-form-field class="filter-input"
                                                style="position: sticky; top: 0px; background: white; z-index: 1000000; width: 100% !important;">
                                                <input type="text" #categoryFilterInput matInput
                                                    (input)="filterCategories($event.target.value)"
                                                    placeholder="Search...">
                                            </mat-form-field>
                                            <div class="select-all">
                                                <mat-checkbox [(ngModel)]="allCategoriesSelected"
                                                    [disabled]="!scheduleInfo?.isapproved || isScheduleDone()"
                                                    [ngModelOptions]="{standalone: true}"
                                                    (change)="toggleAllCategorySelection()">Select All</mat-checkbox>
                                            </div>
                                            <mat-option (click)="categoryOptionClick()"
                                                [disabled]="!scheduleInfo?.isapproved || isScheduleDone()"
                                                *ngFor="let category of filteredCategoryList" [value]="category?.id">
                                                {{category?.categoryname}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-12 col-md-2 col-sm-12">
                                <div style="color: #2f87e2; margin-bottom: 3px;">
                                    Device:
                                </div>
                                <div>
                                    <mat-form-field appearance="outline">
                                        <mat-label style="margin-bottom: 2px;">Choose Devices</mat-label>
                                        <mat-select #selectDevice multiple [(ngModel)]="selectedDevices">
                                            <mat-form-field class="filter-input"
                                                style="position: sticky; top: 0px; background: white; z-index: 1000000; width: 100% !important;">
                                                <input type="text" #deviceFilterInput matInput
                                                    (input)="filterDevices($event.target.value)"
                                                    placeholder="Search...">
                                            </mat-form-field>
                                            <div class="select-all">
                                                <mat-checkbox [(ngModel)]="allDevicesSelected"
                                                    [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                                    [ngModelOptions]="{standalone: true}"
                                                    (change)="toggleAllDeviceSelection()">Select All</mat-checkbox>
                                            </div>
                                            <span *ngFor="let device of filteredDeviceList">
                                                <span style="display: flex; align-items: center;">
                                                    <mat-option (click)="deviceOptionClick()" *ngIf="!device.isDeleted"
                                                        [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                                        [value]="device?.id">
                                                        {{device?.username}}
                                                    </mat-option>
                                                </span>
                                            </span>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-12 d-flex justify-content-center">
                                <button mat-raised-button (click)="submitSelection()"
                                    [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                    color="primary">Submit</button>
                            </div>
                        </div>
                    </div>
                </mat-card-content>
                <div style="display: flex; justify-content: end;">
                    <h6 style="display: flex;">
                        <span style="display: flex; align-items: center; color: #2f87e2;"
                            title="Store Storage"><mat-icon>memory</mat-icon>SS
                            {{formatSizeUnits1((playlist?.storage?.store_totalmemory-playlist?.storage?.store_usedmemory)-selectedSize)}}</span>

                        <span style="display: flex; align-items: center; color:#f86d6d;"
                            title="Playlist Storage">&nbsp;&nbsp;<mat-icon>memory</mat-icon>PS&nbsp;
                            <span>{{((playlist?.storage?.playlist_totalmemory-playlist?.storage?.playlist_usedmemory)-selectedSize)
                                < 0? "-" :""}} </span>
                                    {{formatSizeUnits((playlist?.storage?.playlist_totalmemory-playlist?.storage?.playlist_usedmemory)-selectedSize)}}
                            </span>
                    </h6>
                </div>
                <div>
                    <h6 style="color: rgba(255, 0, 0, 0.918);"
                        *ngIf="((playlist?.storage?.playlist_totalmemory-playlist?.storage?.playlist_usedmemory)-selectedSize) < 0 && ((playlist?.storage?.store_totalmemory-playlist?.storage?.store_usedmemory)-selectedSize)>0">
                        Insufficient Playlist storage, kindly Remove Some Content
                    </h6>
                    <h6 style="color: rgba(255, 0, 0, 0.918);"
                        *ngIf="((playlist?.storage?.store_totalmemory-playlist?.storage?.store_usedmemory)-selectedSize)<0">
                        Insufficient Customer storage, kindly Remove Some Content or purchase the Storage
                    </h6>
                </div>
            </mat-card>
            <mat-card>
                <mat-card-content>
                    <mat-tab-group animationDuration="1000ms" mat-stretch-tabs="false" mat-align-tabs="center"
                        [(selectedIndex)]="reloadIndex" #tabGroup (selectedTabChange)="selectedTabValue($event)">
                        <mat-tab *ngIf="mediatype == 0 || mediatype == 3 || mediatype == 4">

                            <ng-template mat-tab-label>
                                <!-- <i class='fa fa-file'></i> -->
                                <i class="fa fa-solid fa-file-movie-o" style="margin: 6px;"></i>
                                Vertical
                            </ng-template>


                            <mat-card>
                                <div class="container">
                                    <h2>Multi-Image/Video Upload <button *ngIf="existedImages.length!=0"
                                            mat-stroked-button color="accent" (click)="preview()">Preview</button></h2>

                                    <!-- <button *ngIf="isScheduled && mediatype!=4" style="float: right; color: green;" mat-raised-button
                      (click)="stopSchedule()">
                      <div class="online-indicator">
                        <span class="blinkOnline"></span>
                      </div> Stop Schedule
                    </button>
                    <button *ngIf="!isScheduled && mediatype!=4" style="float: right; color: red;" mat-raised-button
                      (click)="openSchedulePopUp(editTimeDate)">
                      <div class="Offline-indicator">
                        <span class="blinkOffline"></span>
                      </div> Schedule
                    </button> -->
                                    <!-- <button style="float: right;" mat-raised-button (click)="openSchedulePopUp(editTimeDate)"
                      *ngIf="mediatype!=4">
                      <div [ngClass]="isScheduled ? 'online-indicator' : 'Offline-indicator' ">
                        <span [ngClass]="isScheduled ? 'blinkOnline' : 'blinkOffline' "></span>
                      </div> <span class={{scheduleFormater()}}>{{scheduleFormater()}}</span>
                    </button> -->
                                    <span *ngIf="existedImages.length!=0">
                                        <button style="float: right;" mat-raised-button
                                            (click)="openSchedulePopUp(editTimeDate)"
                                            *ngIf="mediatype!=4 && !isScheduleDone() && (userRole==='SUBUSER'?scheduleInfo?.isapproved:true)">
                                            <div
                                                [ngClass]="isScheduleDone() ? 'online-indicator' : 'Offline-indicator' ">
                                                <span
                                                    [ngClass]="isScheduleDone() ? 'blinkOnline' : 'blinkOffline' "></span>
                                            </div> <span class={{scheduleFormater()}}>{{scheduleFormater()}}</span>
                                        </button>


                                        <button style="float: right;" mat-raised-button (click)="stopSchedule()"
                                            [disabled]="userRole==='SUBUSER'" *ngIf="mediatype!=4 && isScheduleDone()">
                                            <div
                                                [ngClass]="isScheduleDone() ? 'online-indicator' : 'Offline-indicator' ">
                                                <span
                                                    [ngClass]="isScheduleDone() ? 'blinkOnline' : 'blinkOffline' "></span>
                                            </div> <span class={{scheduleFormater()}}>{{scheduleFormater()}}</span>
                                        </button>
                                    </span>
                                    <button class="btn btn-outline-primary"
                                        [disabled]="(((playlist?.storage?.playlist_totalmemory-playlist?.storage?.playlist_usedmemory)-selectedSize)<=0) || (((playlist?.storage?.client_totalmemory-playlist?.storage?.client_usedmemory)-selectedSize)<=0)  || scheduleFormater()==='Scheduled' || scheduleFormater()==='Onprogress' "
                                        (click)="openChooseFilePopUp(FilesUpload)"> Choose
                                        Files</button>
                                    <!-- <label class="choose-files-button">
                                        <input type="file" onclick="this.value=null;"
                                            accept="image/png, image/gif, image/jpeg  ,.mov,video/*,.mkv,application/x-mpegURL"
                                            (change)="onFileChangeFile($event)" multiple
                                            [disabled]="(((playlist?.storage?.playlist_totalmemory-playlist?.storage?.playlist_usedmemory)-selectedSize)<=0) || (((playlist?.storage?.store_totalmemory-playlist?.storage?.store_usedmemory)-selectedSize)<=0)  || scheduleFormater()==='Scheduled' || scheduleFormater()==='Onprogress' ">
                                        Choose Files
                                    </label> -->
                                    <!-- {{((playlist?.storage?.playlist_totalmemory-playlist?.storage?.playlist_usedmemory)-selectedSize)}}
                    {{((playlist?.storage?.playlist_totalmemory-playlist?.storage?.playlist_usedmemory)-selectedSize)<=0}} -->
                                    <button class="upload-button" (click)="uploadBoth()"
                                        [disabled]="both.length === 0 || (((playlist?.storage?.playlist_totalmemory-playlist?.storage?.playlist_usedmemory)-selectedSize)<=0) || (((playlist?.storage?.store_totalmemory-playlist?.storage?.store_usedmemory)-selectedSize)<=0)  || scheduleFormater()==='Scheduled' || scheduleFormater()==='Onprogress' ">
                                        <i class="fa fa-solid fa-file-movie-o"
                                            style="margin-right: 6px;"></i>Upload</button>

                                    <!-- File input for image upload (allowing multiple selection) -->
                                </div>

                                <br>
                                <!-- <div>
                                      <mat-form-field appearance="outline">
                                          <mat-label>Select an option</mat-label>
                                          <mat-select [(ngModel)]="selectedSplitview">
                                              <mat-option (click)="updateSplitview('ORDER')"
                                                  value="ORDER">Default</mat-option>
                                              <mat-option (click)="updateSplitview('ImageToVideo')"
                                                  value="ImageToVideo">Image To
                                                  Video</mat-option>
                                              <mat-option (click)="updateSplitview('VideoToImage')"
                                                  value="VideoToImage">Video To
                                                  Image</mat-option>
                                          </mat-select>
                                      </mat-form-field>
                                  </div> -->
                                <span style="color: #f86d6d;">
                                    {{scheduleFormater()==='Scheduled' ||scheduleFormater()==='Onprogress'?'If something
                                    needs to be
                                    uploaded, please stop the schedule and select the files':''}}
                                </span>
                            </mat-card>
                            <form [formGroup]="exampleForm" class="example-form" *ngIf="both.length!=0">
                                <div class="row">
                                    <div class="col-12 col-sm-6 col-md-3 mt-1" *ngIf="tagList.length > 0">
                                        <mat-form-field>
                                            <mat-label>Select the content tag</mat-label>
                                            <mat-select formControlName="chooseContentTag">
                                                <mat-option *ngFor="let tag of tagList" [value]="tag.id">{{ tag?.tagname
                                                    | titlecase
                                                    }}</mat-option>
                                            </mat-select>
                                            <mat-error *ngIf="exampleForm.get('chooseContentTag').hasError('required')">
                                                Content tag is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-12 col-sm-6 col-md-3 mt-1" *ngIf="tagList.length > 0">
                                        <mat-form-field class="example-full-width" appearance="fill">
                                            <mat-label>Choose Brand</mat-label>
                                            <input type="text" placeholder="Pick one" aria-label="Number" matInput
                                                formControlName="myControl" [matAutocomplete]="auto">
                                            <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
                                                <mat-option *ngFor="let option of filteredOptions | async"
                                                    [value]="option.name">
                                                    {{ option?.name | titlecase }}
                                                </mat-option>
                                            </mat-autocomplete>
                                            <mat-error *ngIf="exampleForm.get('myControl').hasError('required')">
                                                Brand is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                </div>


                            </form>
                            <div class="gallery-checks">
                                <mat-card class="image-card" *ngFor="let image of both"
                                    (mouseenter)="onMouseEnter(image)" (mouseleave)="onMouseLeave(image)">
                                    <!-- <video controls>
                                          <source [src]="image.url" type="video/mp4">
                                          Your browser does not support the video tag.
                                      </video> -->
                                    <!-- <img mat-card-image [src]="image.url" alt="Image" /> -->
                                    <app-pdf-viewer [url]="image?.url" (click)="openPdf(image?.url)"
                                        *ngIf="image.type.includes('pdf')"></app-pdf-viewer>
                                    <img mat-card-image loading="lazy" *ngIf="image.type.startsWith('image')"
                                        [src]="image?.url" alt="Image">
                                    <video loading="lazy" *ngIf="image.type.startsWith('video')" [src]="image?.url"
                                        controls preload="Metadata"></video>

                                    <mat-card-content>
                                        <span *ngIf="image.type.includes('pdf')">{{image.file?.name}}</span>
                                        <!-- <div class="card-actions mt-1 justify-content-center"
                                        [@showActions]="image === selectedImage ? 'shown' : 'hidden'">
                                        <div class="quantity">
                                            <button (click)="plusOrMinus(-1,image)" class="minus"
                                                aria-label="Decrease">&minus;</button>
                                            <input type="number" disabled class="input-box" [value]="image.repeat"
                                                max="10">
                                            <button (click)="plusOrMinus(+1,image)" class="plus"
                                                aria-label="Increase">&plus;</button>
                                        </div>
                                    </div> -->
                                        <div class="card-actions "
                                            [@showActions]="image === selectedImage ? 'shown' : 'hidden'">
                                            <!-- <button mat-icon-button style="color: red;" (click)="rotateMedia(image)">                       <mat-icon>autorenew</mat-icon>                      </button> -->

                                            <button mat-button class="edit-button" disabled
                                                (click)="onEdit(image)">Edit</button>
                                            <button mat-button class="delete-button"
                                                (click)="removeFile(image)">Remove</button>

                                        </div>
                                    </mat-card-content>
                                </mat-card>
                            </div>
                            <br>
                            <hr>
                            <span id="add-more" *ngIf="existedImages.length!=0">
                                <button mat-raised-button color="warn"
                                    [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                    (click)="changeMediaFilesOrder(existedImages,'vertical')">Change
                                    Order</button> &nbsp; &nbsp; <mat-checkbox
                                    [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                    [(ngModel)]="selectedAllMedia"
                                    (change)="onMediaCheckboxChangeForAllSelect($event,existedImages)" color="primary">
                                    Select
                                    All</mat-checkbox></span>

                            <div class="gallery-checks">

                                <mat-card class="image-card bg-white" *ngFor="let image of existedImages"
                                    (mouseenter)="onMouseEnter(image)" (mouseleave)="onMouseLeave(image)">
                                    <mat-checkbox [checked]="image?.isCheck" *ngIf="image.iscomplete"
                                        [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                        style="position: absolute;  top: -2.2em;    right: -0.8em; z-index: 100;"
                                        (change)="onMediaCheckboxChange($event,image)">
                                    </mat-checkbox>
                                    <app-pdf-viewer [url]="image?.url" (click)="openPdf(image?.url)"
                                        *ngIf="image.type.startsWith('pdf')"></app-pdf-viewer>
                                    <img mat-card-image loading="lazy"
                                        *ngIf="image.type.startsWith('image') && image?.iscomplete" [src]="image?.url"
                                        alt="Image">
                                    <video loading="lazy" preload="Metadata"
                                        *ngIf="image?.type?.startsWith('video') && image?.iscomplete" [src]="image?.url"
                                        controls></video>
                                    <img mat-card-image *ngIf="!image?.iscomplete" src="/assets/images/PWV.gif"
                                        alt="Image">
                                    <mat-card-content>
                                        <div class="pbar-flex-1" *ngIf="!image?.iscomplete">
                                            <div class="progress">
                                                <div class="progress-bar progress-bar-striped progress-bar-animated"
                                                    role="progressbar"
                                                    [ngStyle]="{ 'width': image.converted_percentage + '%' }"
                                                    [aria-valuenow]="image.converted_percentage" aria- valuemin="0"
                                                    aria-valuemax="100">
                                                    {{image.converted_percentage}}%</div>
                                            </div>
                                        </div>
                                        <!-- <div class="progress" *ngIf="!image?.iscomplete">
                        <div class="progress-bar" role="progressbar"
                          [ngStyle]="{ 'width': image.converted_percentage + '%' }"
                          [aria-valuenow]="image.converted_percentage" aria-valuemin="0" aria-valuemax="100">
                          {{image.converted_percentage}}%</div>
                      </div>-->
                                        <h3 style="overflow-wrap: anywhere;">{{ image?.filename }}</h3>
                                        <!-- <p *ngIf="image?.type?.startsWith('image')">Animation :{{ image?.animation }}</p>
                      <p *ngIf="image?.type?.startsWith('image')">Duration : {{ image?.duration +" sec"}}
                      </p> -->
                                    </mat-card-content>
                                    <!-- style="display: flex; justify-content: right;" -->
                                    <mat-card-content>
                                        <div class="card-actions"
                                            [ngStyle]="{'visibility':selectedAllMedia || checkedMediaForm.get('media')?.value.length!=0?'hidden':'visible'}"
                                            [@showActions]="image === selectedImage ? 'shown' : 'hidden'">
                                            <!-- <button mat-icon-button style="color: red;" (click)="rotateMedia(rotateFile,image)">
                        <mat-icon>autorenew</mat-icon>
                      </button> -->
                                            <!-- <button mat-button class="edit-button">Edit</button> -->

                                            <!--  <button mat-button class="edit-button" (click)="rotateMedia(rotateFile,image)">
                        <mat-icon>autorenew</mat-icon>
                      </button>-->
                                            <button mat-mini-fab color="accent"
                                                [disabled]="!scheduleInfo?.isapproved ||isScheduleDone() || image.type.startsWith('pdf')"
                                                (click)="rotateMedia(rotateFile,image)">
                                                <mat-icon>autorenew</mat-icon>
                                            </button>

                                            <!-- <button mat-mini-fab color="primary"
                        *ngIf="customer?.versionMaster?.version=='PRO' && image?.isedit" (click)="editMedia(image)">
                        <mat-icon style="display: flex; justify-content: center; align-items: center;"><i
                            class="fa fa-pencil-square-o" aria-hidden="true"></i>
                        </mat-icon>
                      </button> -->
                                            <!-- <button mat-button class="delete-button"
                        (click)="onDelete(image)"><mat-icon>delete</mat-icon></button>-->
                                            <button mat-mini-fab color="warn"
                                                [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                                (click)="onDelete(image)"><mat-icon>delete</mat-icon></button>
                                        </div>
                                    </mat-card-content>
                                </mat-card>
                            </div>
                        </mat-tab>
                        <mat-tab *ngIf="mediatype == 0 || mediatype == 3 || mediatype == 4">

                            <ng-template mat-tab-label>
                                <!-- <i class='fa fa-file'></i> -->
                                <i class="fa fa-solid fa-file-movie-o" style="margin: 6px;"></i>
                                Horizontal
                            </ng-template>
                            <mat-card>
                                <div class="container">

                                    <h2>Multi-Image/Video Upload <button *ngIf="existedImages.length!=0"
                                            mat-stroked-button color="accent" (click)="preview()">Preview</button></h2>
                                    <!-- <button *ngIf="isScheduled && mediatype!=4" style="float: right; color: green;" mat-raised-button
                      (click)="stopSchedule()">
                      <div class="online-indicator">
                        <span class="blinkOnline"></span>
                      </div> Stop Schedule
                    </button>
                    <button *ngIf="!isScheduled && mediatype!=4" style="float: right; color: red;" mat-raised-button
                      (click)="openSchedulePopUp(editTimeDate)">
                      <div class="Offline-indicator">
                        <span class="blinkOffline"></span>
                      </div>Schedule
                    </button> -->
                                    <span *ngIf="existedImages.length!=0">
                                        <button style="float: right;" mat-raised-button
                                            (click)="openSchedulePopUp(editTimeDate)"
                                            *ngIf="mediatype!=4 && !isScheduleDone() && (userRole==='SUBUSER'?scheduleInfo?.isapproved:true)">
                                            <div
                                                [ngClass]=" isScheduleDone() ? 'online-indicator' : 'Offline-indicator' ">
                                                <span
                                                    [ngClass]=" isScheduleDone() ? 'blinkOnline' : 'blinkOffline' "></span>
                                            </div> <span class={{scheduleFormater()}}>{{scheduleFormater()}}</span>
                                        </button>
                                        <button style=" float: right;" mat-raised-button (click)="stopSchedule()"
                                            [disabled]="userRole==='SUBUSER'" *ngIf="mediatype!=4 && isScheduleDone()">
                                            <div
                                                [ngClass]="isScheduleDone() ? 'online-indicator' : 'Offline-indicator' ">
                                                <span
                                                    [ngClass]="isScheduleDone() ? 'blinkOnline' : 'blinkOffline' "></span>
                                            </div> <span class={{scheduleFormater()}}>{{scheduleFormater()}}</span>
                                        </button>
                                    </span>

                                    <!-- <label class="choose-files-button">
                                        <input type="file" onclick="this.value=null;"
                                            accept="image/png, image/gif, image/jpeg ,video/*,.mov,.mkv,application/x-mpegURL"
                                            (change)="onFileChangeFile($event)" multiple
                                            [disabled]="(((playlist?.storage?.playlist_totalmemory-playlist?.storage?.playlist_usedmemory)-selectedSize)<=0) || (((playlist?.storage?.store_totalmemory-playlist?.storage?.store_usedmemory)-selectedSize)<=0) || scheduleFormater()==='Scheduled' ||scheduleFormater()==='Onprogress' ">
                                        Choose Files
                                    </label> -->
                                    <button class="btn btn-outline-primary"
                                        [disabled]="(((playlist?.storage?.playlist_totalmemory-playlist?.storage?.playlist_usedmemory)-selectedSize)<=0) || (((playlist?.storage?.client_totalmemory-playlist?.storage?.client_usedmemory)-selectedSize)<=0)  || scheduleFormater()==='Scheduled' || scheduleFormater()==='Onprogress' "
                                        (click)="openChooseFilePopUp(FilesUpload)"> Choose
                                        Files</button>
                                    <!-- <button class="upload-button" (click)="uploadBoth()" [disabled]="both.length === 0">
                      <i class="fa fa-solid fa-file-movie-o" style="margin-right: 6px;"></i>Upload</button> -->
                                    <button class="upload-button" (click)="uploadBoth()"
                                        [disabled]="both.length === 0 || (((playlist?.storage?.playlist_totalmemory-playlist?.storage?.playlist_usedmemory)-selectedSize)<=0) || (((playlist?.storage?.store_totalmemory-playlist?.storage?.store_usedmemory)-selectedSize)<=0) || scheduleFormater()==='Scheduled' ||scheduleFormater()==='Onprogress' ">
                                        <i class="fa fa-solid fa-file-movie-o"
                                            style="margin-right: 6px;"></i>Upload</button>


                                    <!-- File input for image upload (allowing multiple selection) -->
                                </div>

                                <br>

                                <span style="color: #f86d6d;">{{scheduleFormater()==='Scheduled'
                                    ||scheduleFormater()==='Onprogress'?'If something needs to be uploaded, please stop
                                    the schedule and select the files':''}}
                                </span>
                            </mat-card>
                            <form [formGroup]="exampleForm" class="example-form" *ngIf="both.length!=0">
                                <div class="row">
                                    <div class="col-12 col-sm-6 col-md-3 mt-1" *ngIf="tagList.length > 0">
                                        <mat-form-field>
                                            <mat-label>Select the content tag</mat-label>
                                            <mat-select formControlName="chooseContentTag">
                                                <mat-option *ngFor="let tag of tagList" [value]="tag.id">{{ tag?.tagname
                                                    | titlecase
                                                    }}</mat-option>
                                            </mat-select>
                                            <mat-error *ngIf="exampleForm.get('chooseContentTag').hasError('required')">
                                                Content tag is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-12 col-sm-6 col-md-3 mt-1" *ngIf="tagList.length > 0">
                                        <mat-form-field class="example-full-width" appearance="fill">
                                            <mat-label>Choose Brand</mat-label>
                                            <input type="text" placeholder="Pick one" aria-label="Number" matInput
                                                formControlName="myControl" [matAutocomplete]="auto">
                                            <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
                                                <mat-option *ngFor="let option of filteredOptions | async"
                                                    [value]="option.name">
                                                    {{ option?.name | titlecase }}
                                                </mat-option>
                                            </mat-autocomplete>
                                            <mat-error *ngIf="exampleForm.get('myControl').hasError('required')">
                                                Brand is required
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                </div>


                            </form>
                            <section class="d-flex justify-content-end mt-2 text-primary" *ngIf="both.length!=0">
                                <mat-checkbox [(ngModel)]="isautorotate" class="example-margin">Do you need a Flip!
                                </mat-checkbox>
                            </section>
                            <div class="gallery-checks">
                                <mat-card class="image-card" *ngFor="let image of both"
                                    (mouseenter)="onMouseEnter(image)" (mouseleave)="onMouseLeave(image)">
                                    <app-pdf-viewer [url]="image?.url" (click)="openPdf(image?.url)"
                                        *ngIf="image.type.includes('pdf')"></app-pdf-viewer>
                                    <img loading="lazy" [ngStyle]="{'transform': 'rotate('+image?.rotate+')'}"
                                        mat-card-image *ngIf="image?.type?.startsWith('image')" [src]="image?.url"
                                        alt="Image">
                                    <video loading="lazy" preload="Metadata"
                                        [ngStyle]="{'transform': 'rotate('+image?.rotate+')'}"
                                        *ngIf="image?.type?.startsWith('video')" [src]="image?.url" controls></video>

                                    <mat-card-content>
                                        <span *ngIf="image.type.includes('pdf')">{{image.file?.name}}</span>
                                        <div class="card-actions"
                                            [@showActions]="image === selectedImage ? 'shown' : 'hidden'">

                                            <button mat-button class="edit-button" disabled
                                                (click)="onEdit(image)">Edit</button>
                                            <button mat-button class="delete-button"
                                                (click)="removeFile(image)">Remove</button>

                                        </div>
                                    </mat-card-content>
                                </mat-card>
                            </div>
                            <br>
                            <hr>
                            <span id="add-more" *ngIf="existedImages.length!=0">
                                <button mat-raised-button color="accent"
                                    [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                    (click)="changeMediaFilesOrder(existedImages,'horizontal')">Change
                                    Order</button>&nbsp; &nbsp; <mat-checkbox [(ngModel)]="selectedAllMedia"
                                    [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                    (change)="onMediaCheckboxChangeForAllSelect($event,existedImages)" color="primary">
                                    Select
                                    All</mat-checkbox>
                            </span>
                            <div class="gallery-checks">
                                <mat-card class="image-card" *ngFor="let image of existedImages"
                                    (mouseenter)="onMouseEnter(image)" (mouseleave)="onMouseLeave(image)">
                                    <mat-checkbox [checked]="image?.isCheck" *ngIf="image.iscomplete"
                                        [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                        style="position: absolute; top: -2.2em;    right: -0.7em; z-index: 100;"
                                        (change)="onMediaCheckboxChange($event,image)">
                                    </mat-checkbox>
                                    <app-pdf-viewer [url]="image?.url" (click)="openPdf(image?.url)"
                                        *ngIf="image.type.startsWith('pdf')"></app-pdf-viewer>
                                    <img mat-card-image loading="lazy"
                                        *ngIf="image.type.startsWith('image') && image?.iscomplete" [src]="image?.url"
                                        alt="Image">
                                    <video loading="lazy" preload="Metadata"
                                        *ngIf="image?.type?.startsWith('video') && image?.iscomplete" [src]="image?.url"
                                        controls></video>
                                    <img mat-card-image *ngIf="!image?.iscomplete" src="/assets/images/PWV.gif"
                                        alt="Image">

                                    <mat-card-content>

                                        <div class="pbar-flex-1" *ngIf="!image?.iscomplete">
                                            <div class="progress">
                                                <div class="progress-bar progress-bar-striped progress-bar-animated"
                                                    role="progressbar"
                                                    [ngStyle]="{ 'width': image.converted_percentage + '%' }"
                                                    [aria-valuenow]="image.converted_percentage" aria- valuemin="0"
                                                    aria-valuemax="100">
                                                    {{image.converted_percentage}}%</div>
                                            </div>
                                        </div>


                                        <h3 style="overflow-wrap: anywhere;">{{ image?.filename }}</h3>

                                    </mat-card-content>
                                    <!-- style="display: flex; justify-content: right;" -->
                                    <mat-card-content>
                                        <div class="card-actions"
                                            [ngStyle]="{'visibility':selectedAllMedia || checkedMediaForm.get('media')?.value.length!=0?'hidden':'visible'}"
                                            [@showActions]="image === selectedImage ? 'shown' : 'hidden'">


                                            <button mat-mini-fab color="accent" (click)="rotateMedia(rotateFile,image)"
                                                [disabled]="!scheduleInfo?.isapproved ||isScheduleDone() || image.type.startsWith('pdf')">
                                                <mat-icon>autorenew</mat-icon>
                                            </button>

                                            <button mat-mini-fab color="warn"
                                                [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                                (click)="onDelete(image)"><mat-icon>delete</mat-icon></button>
                                        </div>
                                    </mat-card-content>
                                </mat-card>
                            </div>

                        </mat-tab>
                        <mat-tab
                            *ngIf="(mediatype == 0 || mediatype == 3 || mediatype == 4) && customer?.versionMaster?.version=='PRO'">
                            <ng-template mat-tab-label>
                                <!-- <i class="fa fa-diamond" style="margin: 6px;" aria-hidden="true"></i> -->
                                <i class="fa fa-building" style="margin: 6px;" aria-hidden="true"></i>
                                Split Screen
                            </ng-template>
                            <mat-card>
                                <div class="container">
                                    <label>
                                        <mat-form-field appearance="outline">
                                            <mat-select name="countryString" [(value)]="isProVertical"
                                                (selectionChange)="getSplitLayoutsByPlaylistId()">
                                                <mat-option [value]="'9:16'">Vertical</mat-option>
                                                <mat-option [value]="'16:9'">Horizontal</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </label>
                                    <span *ngIf="split?.length!=0">
                                        <button style="float: right; margin-top: 1%;" mat-raised-button
                                            (click)="openSchedulePopUp(editTimeDate)"
                                            *ngIf="mediatype!=4 && !isScheduleDone() && (userRole==='SUBUSER'?scheduleInfo?.isapproved:true)">
                                            <div
                                                [ngClass]="isScheduleDone() ? 'online-indicator' : 'Offline-indicator' ">
                                                <span
                                                    [ngClass]="isScheduleDone() ? 'blinkOnline' : 'blinkOffline' "></span>
                                            </div> <span class={{scheduleFormater()}}>{{scheduleFormater()}}</span>
                                        </button>
                                        <button style="float: right;" mat-raised-button (click)="stopSchedule()"
                                            [disabled]="userRole==='SUBUSER'" *ngIf="mediatype!=4 && isScheduleDone()">
                                            <div
                                                [ngClass]="isScheduleDone() ? 'online-indicator' : 'Offline-indicator' ">
                                                <span
                                                    [ngClass]="isScheduleDone() ? 'blinkOnline' : 'blinkOffline' "></span>
                                            </div> <span class={{scheduleFormater()}}>{{scheduleFormater()}}</span>
                                        </button>
                                    </span>
                                </div>
                            </mat-card>
                            <hr>
                            <mat-card id="add-more">
                                <div style="display: flex; justify-content: space-between;">
                                    <div>
                                        <button mat-raised-button color="warn"
                                            [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                            (click)="showDefaultLayouts(layoutsdefault)">Default
                                            Layouts</button>&nbsp;&nbsp;
                                        <button mat-raised-button color="primary"
                                            [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                            (click)="sendOtp()"> + add
                                            more</button>&nbsp;&nbsp;
                                        <button mat-raised-button color="accent"
                                            [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                            (click)="changeMediaFilesOrder(split,'split')">Change
                                            Order</button>
                                    </div>
                                    <button mat-raised-button color="primary"
                                        [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                        (click)="onchangeList(refresh)"><i #refresh class="fa fa-refresh"></i></button>
                                </div>
                                <div style="display: flex;  flex-wrap: wrap; justify-content: center;">
                                    <mat-card class="image-card" style="margin: 0.5%;" *ngFor="let s of split "
                                        (mouseenter)="onMouseEnter(s)" (mouseleave)="onMouseLeave(s)">

                                        <div style="display: flex; justify-content: center;align-items: center;">
                                            <!-- [ngStyle]="isVertical=='9:16'? isMoblie?{'height': '75vh', 'width': '80vw'} :{'height': '75vh', 'width': '25vw'}: isMoblie?{'height': '30vh', 'width': '100vw'}:{'height': '47vh', 'width': '43vw'}" -->
                                            <div
                                                [ngStyle]="isProVertical=='9:16'? {'height': round(1920/5) , 'width': round(1080/5)}: {'height':round(1080/5) , 'width': round(1920/5)}">
                                                <div class="marquee-container"
                                                    *ngIf="playlist?.isscroller && selectedScroller=='1'">
                                                    <ul class="marquee-list" style="margin-bottom: 0PX !important;">
                                                        <li *ngFor="let item of scrollerList"
                                                            [ngStyle]="{'color':item.fncolor,'background-color':item.bgcolor,'font-size':item.fnsize,'font-family':item.font_folder}">
                                                            {{item.message }}</li>
                                                    </ul>
                                                </div>
                                                <gridster [options]="options">
                                                    <gridster-item [item]="item" *ngFor="let item of s.zonelist">

                                                        <label class="hoverable" [for]="item.id+'out'"
                                                            style="height: 100%; width: 100%;">

                                                            <div ngClass="swiper swiper-slider"
                                                                style="height: 100%; width: 100%;">
                                                                <div class="swiper-wrapper">
                                                                    <div class="swiper-slide"
                                                                        *ngFor="let obj of item.medialist">
                                                                        <ng-container
                                                                            *ngIf="obj?.type.includes('image'); else videoOrIframeTemplate">
                                                                            <!-- Image Template -->
                                                                            <img loading="lazy"
                                                                                style="width: 100%; height: 100%;"
                                                                                [src]="obj?.url" alt="Image">
                                                                        </ng-container>
                                                                        <ng-template #videoOrIframeTemplate>
                                                                            <!-- Video or Iframe Template -->
                                                                            <ng-container
                                                                                *ngIf="obj?.type.includes('video'); then videoTemplate else iframeTemplate">
                                                                            </ng-container>
                                                                        </ng-template>
                                                                        <ng-template #videoTemplate>
                                                                            <!-- Video Template -->
                                                                            <video loading="lazy" preload="Metadata"
                                                                                style="width: 100%; height: 100%; object-fit: fill;"
                                                                                [muted]="item.isMuted"
                                                                                [autoplay]="false" loop controls>
                                                                                <source [src]="obj?.url"
                                                                                    type="video/mp4">
                                                                                Your browser does not support the video
                                                                                tag.
                                                                            </video>
                                                                        </ng-template>
                                                                        <ng-template #iframeTemplate>
                                                                            <!-- Iframe Template -->
                                                                            <iframe width="560" height="315"
                                                                                [src]="obj.url"
                                                                                title="YouTube video player"
                                                                                frameborder="0"
                                                                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                                                                allowfullscreen></iframe>
                                                                        </ng-template>


                                                                    </div>
                                                                </div>


                                                            </div>

                                                            <!-- <div class="hover-text">Choose file</div> -->

                                                            <div class="background"></div>
                                                        </label>
                                                        <br />


                                                    </gridster-item>
                                                </gridster>
                                                <div class="marquee-container"
                                                    *ngIf="playlist?.isscroller && selectedScroller=='2'">
                                                    <ul class="marquee-list" style="margin-bottom: 0px !important;">
                                                        <li *ngFor="let item of scrollerList"
                                                            [ngStyle]="{'color':item.fncolor,'background-color':item.bgcolor,'font-size':item.fnsize,'font-family':item.font_folder}">
                                                            {{item.message }}</li>
                                                    </ul>
                                                </div>
                                            </div>

                                        </div>
                                        <!-- <input [(ngModel)]="selectedScreenValue" type="radio" [value]="s.id"> {{ s.name }} -->
                                        <div [ngStyle]="{'margin-top': selectedScroller=='2'?'8%':'1%'}">
                                            <p> layout name: {{s.layoutname}} <br>zone count: {{s.zonecount}}
                                                <br>
                                                <span [ngStyle]="{'color':s.isactive?'green':'red'}">Publish: </span>
                                                <mat-checkbox [checked]="s.isactive"
                                                    [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                                    (change)="onCheckboxChange($event,s)">
                                                </mat-checkbox>
                                            </p>
                                            <!-- <button mat-flat-button color="primary" (click)="onEditSplit()">Edit</button>
                        <button mat-flat-button color="accent" (click)="onEditSplit()">Remove</button> -->

                                            <div class="card-actions"
                                                [@showActions]="s === selectedImage ? 'shown' : 'hidden'">
                                                <div class="gallery-checks d-flex justify-content-between">

                                                    <button mat-mini-fab color="primary"
                                                        [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                                        (click)="onEditSplit(s)"><mat-icon
                                                            class="d-flex justify-content-center"><i
                                                                class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                                        </mat-icon></button>
                                                    <button mat-mini-fab color="warn"
                                                        [disabled]="!scheduleInfo?.isapproved ||isScheduleDone()"
                                                        (click)="onRemoveSplit(s)"><mat-icon>delete</mat-icon></button>
                                                </div>
                                            </div>
                                        </div>
                                    </mat-card>
                                </div>
                            </mat-card>
                            <!-- <mat-card *ngIf="isProVertical=='16:9'">
                  <div class="gallery-checks">
                    <span>
  
                    </span>
                  </div>
                </mat-card> -->
                        </mat-tab>
                    </mat-tab-group>
                </mat-card-content>
            </mat-card>
        </div>
    </div>
</section>
<ng-template #editTimeDate>
    <div class="m-2">
        <p style=" color: brown; font-family: system-ui; font-weight: 700;">Set Schedule Date & Time</p>
        <input type="datetime-local" step="1" [min]="currentDate1" class="custom-input"
            placeholder="Start Date and Time" [(ngModel)]="startDate">
        <br>
        <!-- <br>
        <input type="datetime-local" step="1" [min]="currentDate1" class="custom-input" placeholder="End Date and Time"
            [(ngModel)]="endDate">
        <br> -->
        <mat-dialog-actions>
            <div class="d-flex justify-content-end">
                <button mat-raised-button color="accent" matDialogClose="yes" (click)="close()">Cancel</button>
                <button mat-raised-button color="primary" (click)="dateTimePicker()">
                    Save
                </button>
            </div>
        </mat-dialog-actions>
    </div>
</ng-template>
<ng-template #layoutsdefault let-data>
    <h1 style="position: sticky; color: #010e27; text-align: center;"> {{isProVertical=='9:16'? 'Vertical Default
        Layouts':'Horizontal Default Layouts'}}
    </h1>
    <div style="position: relative; overflow-y: scroll; height: 90%;">
        <div class="gallery-checks">
            <mat-card class="image-card" style=" cursor: pointer;" *ngFor="let image of data"
                (click)="onChooseLayout(image)">
                <img loading="lazy" mat-card-image [src]="image?.image_url" alt="Image">
                <mat-card-content>
                    <div>
                        <p style="font-size: small; color: #3498db !important; font-weight: 600 !important; ">
                            layoutname:{{image.layoutname}}
                            <br>
                            zonecount:{{image.zonecount}} <span style="color: #010e2793;">({{image?.height_width}})
                            </span>
                        </p>
                    </div>
                </mat-card-content>
            </mat-card>
        </div>
    </div>

</ng-template>

<ng-template #rotateFile let-data>
    <div style="color: #3f51b5; font-weight: 500; text-align: right; font-size: medium;">{{data.rotate}}<span
            style="vertical-align: super; font-size: xx-small;">o</span></div>
    <!-- <div class="container " style="height: 100px;">
      <div class=" row">
        <div>
          <img loading="lazy" [ngStyle]="{'transform': 'rotate('+data!.rotate+')'}" mat-card-image width="100%" height="100%"
            *ngIf="data.type.startsWith('image')" [src]="data?.url" alt="Image">
          <video loading="lazy" preload="Metadata" [ngStyle]="{'transform': 'rotate('+data?.rotate+')'}" width="100%" height="100%"
            *ngIf="data?.type?.startsWith('video')" [src]="data?.url" controls></video>
        </div>
      </div>
      <div>
        <button style="color: red;" (click)="rotatePopUp(data)">
          rotate
        </button>
      </div>
    </div> -->

    <div class="container m-2"
        style="display: flex; justify-content: center; width: auto !important; height: auto !important; align-items: center; margin: 40px; padding: 20px;">
        <div
            style="height: 450px !important; width: auto; display: flex; justify-content: center; align-items: center;">
            <img loading="lazy" [ngStyle]="{'transform': 'rotate('+data!.rotate+'deg)'}" mat-card-image
                style="max-width:300px; max-height: 300px;" *ngIf="data.type.startsWith('image')" [src]="data?.url"
                alt="Image">
            <video loading="lazy" [ngStyle]="{'transform': 'rotate('+data?.rotate+'deg)'}"
                style="width:250px; height: 350px;" preload="Metadata" *ngIf="data?.type?.startsWith('video')"
                [src]="data?.url" controls></video>
        </div>
    </div>
    <div class="actions mb-1" style="display: flex; justify-content: space-evenly;">
        <button mat-mini-fab color="primary" (click)="saveFile(data)"> <mat-icon>save</mat-icon>
        </button>
        <button mat-mini-fab color="warn" (click)="rotatePopUp(data)">
            <mat-icon>autorenew</mat-icon></button>

        <button mat-mini-fab (click)="matDialogClose()">
            <mat-icon>close</mat-icon></button>
    </div>
</ng-template>

<ng-template #FilesUpload>
    <div class="responsive-buttons">
        <div class="radio-inputs">
            <!-- <app-drivepicker></app-drivepicker> -->
            <label (click)="handleAuthClick()">
                <!-- <input class="radio-input" type="button" name="engine"> -->
                <span class="radio-tile">
                    <span class="radio-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100"
                            viewBox="0 0 48 48">
                            <path fill="#eba400"
                                d="M45,30c0,0.35-0.1,0.7-0.28,1.01L31.51,30l13.21-1.01C44.9,29.3,45,29.65,45,30z">
                            </path>
                            <linearGradient id="K2TlVgt3XTGiG8lBM2DF6a_eKDChMKt75eu_gr1" x1="39.84" x2="16.836"
                                y1="41.496" y2="30.77" gradientUnits="userSpaceOnUse">
                                <stop offset="0" stop-color="#2a96f4"></stop>
                                <stop offset=".535" stop-color="#2895f3"></stop>
                                <stop offset=".728" stop-color="#2190ee"></stop>
                                <stop offset=".865" stop-color="#1687e7"></stop>
                                <stop offset=".976" stop-color="#057bdc"></stop>
                                <stop offset="1" stop-color="#0077d9"></stop>
                            </linearGradient>
                            <path fill="url(#K2TlVgt3XTGiG8lBM2DF6a_eKDChMKt75eu_gr1)"
                                d="M45,30c0,0.35-0.1,0.7-0.28,1.01l-5.63,10C38.74,41.62,38.08,42,37.37,42H11.54 c-0.35,0-0.69-0.09-0.99-0.27L11.45,30H45z">
                            </path>
                            <linearGradient id="K2TlVgt3XTGiG8lBM2DF6b_eKDChMKt75eu_gr2" x1="3.522" x2="24.656"
                                y1="30.11" y2="17.909" gradientUnits="userSpaceOnUse">
                                <stop offset="0" stop-color="#4caf50"></stop>
                                <stop offset=".486" stop-color="#4aae50"></stop>
                                <stop offset=".661" stop-color="#43a94e"></stop>
                                <stop offset=".786" stop-color="#38a14c"></stop>
                                <stop offset=".887" stop-color="#279648"></stop>
                                <stop offset=".972" stop-color="#184"></stop>
                                <stop offset="1" stop-color="#088242"></stop>
                            </linearGradient>
                            <path fill="url(#K2TlVgt3XTGiG8lBM2DF6b_eKDChMKt75eu_gr2)"
                                d="M28.234,11.67L10.55,41.73h-0.01c-0.3-0.17-0.55-0.42-0.73-0.73L4.3,31.13 c-0.36-0.62-0.36-1.39,0-2.01L16.93,7c0.18-0.31,0.43-0.56,0.73-0.73h0.01L28.234,11.67z">
                            </path>
                            <linearGradient id="K2TlVgt3XTGiG8lBM2DF6c_eKDChMKt75eu_gr3" x1="31.335" x2="31.335" y1="6"
                                y2="30" gradientUnits="userSpaceOnUse">
                                <stop offset="0" stop-color="#ffd747"></stop>
                                <stop offset=".482" stop-color="#fed645"></stop>
                                <stop offset=".655" stop-color="#fdd13e"></stop>
                                <stop offset=".779" stop-color="#f9c833"></stop>
                                <stop offset=".879" stop-color="#f4bc22"></stop>
                                <stop offset=".964" stop-color="#eead0c"></stop>
                                <stop offset="1" stop-color="#eba400"></stop>
                            </linearGradient>
                            <path fill="url(#K2TlVgt3XTGiG8lBM2DF6c_eKDChMKt75eu_gr3)"
                                d="M45,30H31.511L17.67,6.27C17.97,6.09,18.31,6,18.66,6h11.71c0.71,0,1.37,0.38,1.72,0.99 l12.63,22C44.9,29.3,45,29.65,45,30z">
                            </path>
                        </svg>
                    </span>
                    <span class="radio-label">Google Drive</span>
                </span>
            </label>
            <label>
                <!-- <input class="radio-input" type="radio" name="engine"> -->
                <input class="radio-input" type="file" style="display: none;"
                    accept="image/png, image/jpg, image/jpeg  ,.mov,video/mp4,.mkv,application/pdf"
                    (change)="onFileChangeFile($event)" multiple>
                <span class="radio-tile">
                    <span class="radio-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                            width="256" height="256" viewBox="0 0 256 256" xml:space="preserve">
                            <defs>
                            </defs>
                            <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;"
                                transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
                                <path
                                    d="M 73.538 35.162 l -52.548 1.952 c -1.739 0 -2.753 0.651 -3.232 2.323 L 6.85 76.754 c -0.451 1.586 -2.613 2.328 -4.117 2.328 h 0 C 1.23 79.082 0 77.852 0 76.349 l 0 -10.458 V 23.046 v -2.047 v -6.273 c 0 -2.103 1.705 -3.808 3.808 -3.808 h 27.056 c 1.01 0 1.978 0.401 2.692 1.115 l 7.85 7.85 c 0.714 0.714 1.683 1.115 2.692 1.115 H 69.73 c 2.103 0 3.808 1.705 3.808 3.808 v 1.301 C 73.538 26.106 73.538 35.162 73.538 35.162 z"
                                    style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(224,173,49); fill-rule: nonzero; opacity: 1;"
                                    transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                <path
                                    d="M 2.733 79.082 L 2.733 79.082 c 1.503 0 2.282 -1.147 2.733 -2.733 l 10.996 -38.362 c 0.479 -1.672 2.008 -2.824 3.748 -2.824 h 67.379 c 1.609 0 2.765 1.546 2.311 3.09 L 79.004 75.279 c -0.492 1.751 -1.571 3.818 -3.803 3.803 C 75.201 79.082 2.733 79.082 2.733 79.082 z"
                                    style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(255,200,67); fill-rule: nonzero; opacity: 1;"
                                    transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                            </g>
                        </svg>
                    </span>
                    <span class="radio-label">Local Folder</span>
                </span>
            </label>
            <!-- <label>
          <input class="radio-input" type="radio" name="engine">
          <span class="radio-tile">
            <span class="radio-icon">
              <svg stroke="currentColor" xml:space="preserve" viewBox="0 0 324.018 324.017"
                xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="Capa_1" version="1.1"
                fill="none">
                <g stroke-width="0" id="SVGRepo_bgCarrier"></g>
                <g stroke-linejoin="round" stroke-linecap="round" id="SVGRepo_tracerCarrier"></g>
                <g id="SVGRepo_iconCarrier">
                  <g>
                    <g>
                      <path
                        d="M317.833,197.111c3.346-11.148,2.455-20.541-2.65-27.945c-9.715-14.064-31.308-15.864-35.43-16.076l-8.077-4.352 l-0.528-0.217c-8.969-2.561-42.745-3.591-47.805-3.733c-7.979-3.936-14.607-7.62-20.475-10.879 c-20.536-11.413-34.107-18.958-72.959-18.958c-47.049,0-85.447,20.395-90.597,23.25c-2.812,0.212-5.297,0.404-7.646,0.59 l-6.455-8.733l7.34,0.774c2.91,0.306,4.267-1.243,3.031-3.459c-1.24-2.216-4.603-4.262-7.519-4.57l-23.951-2.524 c-2.91-0.305-4.267,1.243-3.026,3.459c1.24,2.216,4.603,4.262,7.519,4.57l3.679,0.386l8.166,11.05 c-13.823,1.315-13.823,2.139-13.823,4.371c0,18.331-2.343,22.556-2.832,23.369L0,164.443v19.019l2.248,2.89 c-0.088,2.775,0.823,5.323,2.674,7.431c5.981,6.804,19.713,7.001,21.256,7.001c4.634,0,14.211-2.366,20.78-4.153 c-0.456-0.781-0.927-1.553-1.3-2.392c-0.36-0.809-0.603-1.668-0.885-2.517c-0.811-2.485-1.362-5.096-1.362-7.845 c0-14.074,11.449-25.516,25.515-25.516s25.52,11.446,25.52,25.521c0,6.068-2.221,11.578-5.773,15.964 c-0.753,0.927-1.527,1.828-2.397,2.641c-1.022,0.958-2.089,1.859-3.254,2.641c29.332,0.109,112.164,0.514,168.708,1.771 c-0.828-0.823-1.533-1.771-2.237-2.703c-0.652-0.854-1.222-1.75-1.761-2.688c-2.164-3.744-3.5-8.025-3.5-12.655 c0-14.069,11.454-25.513,25.518-25.513c14.064,0,25.518,11.449,25.518,25.513c0,5.126-1.553,9.875-4.152,13.878 c-0.605,0.922-1.326,1.755-2.04,2.594c-0.782,0.922-1.616,1.781-2.527,2.584c5.209,0.155,9.699,0.232,13.546,0.232 c19.563,0,23.385-1.688,23.861-5.018C324.114,202.108,324.472,199.602,317.833,197.111z">
                      </path>
                      <path
                        d="M52.17,195.175c3.638,5.379,9.794,8.922,16.756,8.922c0.228,0,0.44-0.062,0.663-0.073c2.576-0.083,5.043-0.61,7.291-1.574 c1.574-0.678,2.996-1.6,4.332-2.636c4.782-3.702,7.927-9.429,7.927-15.933c0-11.144-9.066-20.216-20.212-20.216 s-20.213,9.072-20.213,20.216c0,2.263,0.461,4.411,1.149,6.446c0.288,0.85,0.616,1.673,1.015,2.471 C51.279,193.606,51.667,194.434,52.17,195.175z">
                      </path>
                      <path
                        d="M269.755,209.068c2.656,0,5.173-0.549,7.503-1.481c1.589-0.642,3.06-1.491,4.422-2.495 c1.035-0.767,1.988-1.616,2.863-2.559c3.34-3.604,5.432-8.389,5.432-13.681c0-11.144-9.071-20.21-20.215-20.21 s-20.216,9.066-20.216,20.21c0,4.878,1.812,9.3,4.702,12.801c0.818,0.989,1.719,1.89,2.708,2.713 c1.311,1.088,2.729,2.024,4.293,2.755C263.836,208.333,266.704,209.068,269.755,209.068z">
                      </path>
                    </g>
                  </g>
                </g>
              </svg>
            </span>
            <span class="radio-label">Car</span>
          </span>
        </label> -->
        </div>
    </div>
</ng-template>
<ng-template #mediaRepeat>
    <h2 mat-dialog-title>Duplication of media files </h2>
    <mat-dialog-content class="mat-typography">
        <div class="quantity">
            <button (click)="plusOrMinus(-1)" class="minus" aria-label="Decrease">&minus;</button>
            <input type="number" disabled class="input-box" [(ngModel)]="repeatFileCount" [max]="10">
            <button (click)="plusOrMinus(+1)" class="plus" aria-label="Increase">&plus;</button>
        </div>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button mat-raised-button mat-dialog-close color="warn">Close</button>
        <button mat-raised-button [mat-dialog-close]="true" color="primary" (click)="duplicateMediaFiles()"
            cdkFocusInitial>Save</button>
    </mat-dialog-actions>
</ng-template>