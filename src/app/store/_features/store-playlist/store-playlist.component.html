<mat-tab-group animationDuration="1000ms" mat-stretch-tabs="false" mat-align-tabs="center"
    (selectedTabChange)="onTabChanged($event);">
    <mat-tab>
        <ng-template mat-tab-label>
            <i class="fa fa-duotone fa-desktop" style="margin: 6px;"></i>
            Playlist
        </ng-template>
        <mat-card class="example-card">
            <mat-card-header>
                <mat-card-title>
                    <button mat-raised-button color="primary" *ngIf="userRole === 'STORE' || userRole === 'SUBUSER'"
                        (click)="addPlaylist(userForm,'playlist')">+ Add
                        Playlist</button> &nbsp; &nbsp;
                    <a class="btn btn-outline-success float-right" (click)="exportAsExcelFile()">
                        <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                        EXCEL
                    </a>
                    <div class="row mt-1">
                        <div class="col-md-6 col-12">
                            <mat-form-field style="width: 100%;" *ngIf="userRole!='SUBUSER' && userRole!='STORE'">
                                <mat-label>Choose Store</mat-label>
                                <mat-select #selectStore multiple [(ngModel)]="selectedStores">
                                    <mat-form-field class="filter-input"
                                        style="position: sticky; top: 0px; background: white; z-index: 1000000; width: 100% !important;">
                                        <input type="text" #storeFilterInput matInput
                                            (input)="filterStores($event.target.value)" placeholder="Search...">
                                    </mat-form-field>
                                    <div class="select-all">
                                        <mat-checkbox [(ngModel)]="allStoresSelected"
                                            [ngModelOptions]="{standalone: true}"
                                            (change)="toggleAllStoresSelection()">Select All</mat-checkbox>
                                    </div>
                                    <mat-option (click)="storeOptionClick()" [disabled]="category?.id==0"
                                        *ngFor="let category of filteredStoreListDropDown" [value]="category?.id">
                                        {{category?.name | titlecase }}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>
                        </div>
                        <div [ngClass]="userRole!='SUBUSER' && userRole!='STORE' ?'col-md-6 col-12':'col-12'">
                            <mat-form-field style="width: 100%;">
                                <mat-label>Choose Category</mat-label>
                                <mat-select #selectFilterCategory multiple [(ngModel)]="selectedFilterCategories">
                                    <mat-form-field class="filter-input"
                                        style="position: sticky; top: 0px; background: white; z-index: 1000000; width: 100% !important;">
                                        <input type="text" #categoryFilterInput matInput
                                            (input)="filterlistCategories($event.target.value)" placeholder="Search...">
                                    </mat-form-field>
                                    <div class="select-all">
                                        <mat-checkbox [(ngModel)]="allFilterCategoriesSelected"
                                            [ngModelOptions]="{standalone: true}"
                                            (change)="toggleAllCategoryFilterSelection()">Select All</mat-checkbox>
                                    </div>
                                    <mat-option (click)="categoryFilterOptionClick()" [disabled]="category?.id==0"
                                        *ngFor="let category of filteredCategoryListDropDownList"
                                        [value]="category?.id">
                                        {{category?.categoryname | titlecase }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                    </div>

                </mat-card-title>

            </mat-card-header>
            <mat-card-content>
                <div class="dashboard">
                    <a class="Ancher" *ngFor="let playlist of Playlist">
                        <div class="item">
                            <div class="d-flex justify-content-end">
                                <!-- <div style="padding-bottom: 1px; color: #ff4081; font-size: x-small; font-weight: 700;">
                                    {{playlist?.state?.statename | uppercase}} <span style="color: green;"> /
                                    </span>
                                    {{ playlist?.district?.name |uppercase}} <br> <span style="color: green;"> /
                                    </span>{{ playlist?.city?.cityname | uppercase}}<span style="color: green;"> /
                                    </span>{{playlist?.location?.area | uppercase}}

                                </div> -->
                                <button mat-mini-fab *ngIf="userRole==='STORE'||userRole==='SUBUSER'"
                                    (click)="settingPlaylist(playlist,playlist)" class="my-fab">
                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                </button>
                            </div>
                            <div class="content"
                                (click)="userRole==='STORE' || userRole==='SUBUSER'? mediaUpload(playlist):''">
                                <span>
                                    vertical:
                                    {{ "Fill [" + getCountOfSpecificValue(playlist.slot_info?.vertical_slot, "true") +
                                    "]
                                    Empty ["
                                    + getCountOfSpecificValue(playlist.slot_info?.vertical_slot, "false") + "]" }}
                                </span>
                                <div class="seat-box">
                                    <span *ngFor="let o of playlist.slot_info?.vertical_slot">
                                        <div class="seat" [ngClass]="o=='true' ? 'booked' : 'available'">
                                            <i class="fa fa-square" [title]="o=='true' ? 'Filled Slot' : 'Empty Slot'"
                                                aria-hidden="true"></i>
                                        </div>
                                    </span>
                                </div>
                                <span>
                                    Horizontal:
                                    {{ "Fill [" + getCountOfSpecificValue(playlist.slot_info?.horizondal_slot, 'true')
                                    + "]
                                    Empty["
                                    + getCountOfSpecificValue(playlist.slot_info?.horizondal_slot, 'false') + "]" }}
                                </span>
                                <div class="seat-box">
                                    <span *ngFor="let o of playlist.slot_info?.horizondal_slot">
                                        <div class="seat" [ngClass]="o=='true' ? 'booked' : 'available'">
                                            <i class="fa fa-square" [title]="o=='true' ? 'Filled Slot' : 'Empty Slot'"
                                                aria-hidden="true"></i>
                                        </div>
                                    </span>
                                </div>
                                <div class="indicator">
                                    <p class="scheduled" *ngIf=" scheduleFormater(playlist) == 'Scheduled'">{{
                                        scheduleFormater(playlist) }}</p>
                                    <p class="onprogress" *ngIf="scheduleFormater(playlist)  == 'Onprogress'">{{
                                        scheduleFormater(playlist) }}</p>
                                    <p class="finished" *ngIf="scheduleFormater(playlist)  == 'Finished'">{{
                                        scheduleFormater(playlist) }}</p>
                                    <p class="unscheduled" *ngIf="scheduleFormater(playlist)  == 'Not Scheduled'">{{
                                        scheduleFormater(playlist) }}</p>
                                </div>
                                <div class="titlediv"><span class="title" style="font-size: x-small !important;">
                                        <p style="font-size: x-small !important;"
                                            *ngIf="userRole!='STORE'&&userRole!='SUBUSER'">Store
                                            :{{playlist?.store?.storename}} </p>
                                        <p style="font-size: x-small !important;">Category
                                            :{{playlist.categoryname}} </p>
                                        <p style="font-size: x-small !important;" *ngIf="!playlist.sch_start_time">
                                            Start Time
                                            : 0000-00-00 00</p>
                                        <p style="font-size: x-small !important;" *ngIf="playlist.sch_start_time">
                                            Start Time
                                            : {{playlist.sch_start_time | date :'medium'}}</p>
                                        <p style="font-size: x-small !important;" *ngIf="!playlist.sch_end_time">End
                                            Time
                                            : 0000-00-00 00</p>
                                        <p style="font-size: x-small !important;" *ngIf="playlist.sch_end_time">End
                                            Time
                                            :{{playlist.sch_end_time | date :'medium'}}</p>
                                        <p style="font-size: x-small !important;" *ngIf="!playlist.duration">
                                            Duration
                                            :0 sec</p>

                                        <p style="font-size: x-small !important;" *ngIf="playlist.duration">Duration
                                            :{{playlist.duration}}</p>
                                        <p style="font-size: x-small !important;">Media:{{
                                            "["+playlist.file_count +"]" }}</p>

                                    </span>
                                </div>
                                <br>
                                <div class="tag">
                                    <span class="type">{{playlist.filename}}</span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </mat-card-content>
        </mat-card>

    </mat-tab>

    <mat-tab>
        <ng-template mat-tab-label>
            <i class="fa fa-newspaper-o" aria-hidden="true" style="margin: 6px;"></i>
            Default Content
        </ng-template>
        <mat-card class="example-card">
            <mat-card-header>
                <mat-card-title>

                    <button mat-raised-button color="primary" *ngIf="userRole === 'STORE' || userRole === 'SUBUSER'"
                        (click)="addPlaylist(userForm,'default playlist')">+
                        Add
                        Playlist</button>&nbsp; &nbsp;
                    <a class="btn btn-outline-success float-right" (click)="exportAsExcelFile()">
                        <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                        EXCEL
                    </a>
                    <div class="row mt-1">
                        <div class="col-md-6 col-12">
                            <mat-form-field style="width: 100%;" *ngIf="userRole!='SUBUSER' && userRole!='STORE'">
                                <mat-label>Choose Store</mat-label>
                                <mat-select #selectStore multiple [(ngModel)]="selectedStores">
                                    <mat-form-field class="filter-input"
                                        style="position: sticky; top: 0px; background: white; z-index: 1000000; width: 100% !important;">
                                        <input type="text" #storeFilterInput matInput
                                            (input)="filterStores($event.target.value)" placeholder="Search...">
                                    </mat-form-field>
                                    <div class="select-all">
                                        <mat-checkbox [(ngModel)]="allStoresSelected"
                                            [ngModelOptions]="{standalone: true}"
                                            (change)="toggleAllStoresSelection()">Select All</mat-checkbox>
                                    </div>
                                    <mat-option (click)="storeOptionClick()" [disabled]="category?.id==0"
                                        *ngFor="let category of filteredStoreListDropDown" [value]="category?.id">
                                        {{category?.name | titlecase }}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>
                        </div>
                        <div [ngClass]="userRole!='SUBUSER' && userRole!='STORE' ?'col-md-6 col-12':'col-12'">
                            <mat-form-field style="width: 100%;">
                                <mat-label>Choose Category</mat-label>
                                <mat-select #selectFilterCategory multiple [(ngModel)]="selectedFilterCategories">
                                    <mat-form-field class="filter-input"
                                        style="position: sticky; top: 0px; background: white; z-index: 1000000; width: 100% !important;">
                                        <input type="text" #categoryFilterInput matInput
                                            (input)="filterlistCategories($event.target.value)" placeholder="Search...">
                                    </mat-form-field>
                                    <div class="select-all">
                                        <mat-checkbox [(ngModel)]="allFilterCategoriesSelected"
                                            [ngModelOptions]="{standalone: true}"
                                            (change)="toggleAllCategoryFilterSelection()">Select All</mat-checkbox>
                                    </div>
                                    <mat-option (click)="categoryFilterOptionClick()" [disabled]="category?.id==0"
                                        *ngFor="let category of filteredCategoryListDropDownList"
                                        [value]="category?.id">
                                        {{category?.categoryname | titlecase }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                    </div>

                </mat-card-title>
            </mat-card-header>
            <mat-card-content>

                <div class="dashboard">
                    <a class="Ancher" *ngFor="let playlist of Playlist">
                        <div class="item">
                            <div class="d-flex justify-content-end">
                                <!-- <div style="padding-bottom: 1px; color: #ff4081; font-size: x-small; font-weight: 700;">
                                    {{playlist?.state?.statename | uppercase}} <span style="color: green;"> /
                                    </span>
                                    {{ playlist?.district?.name |uppercase}} <br> <span style="color: green;"> /
                                    </span>{{ playlist?.city?.cityname | uppercase}}<span style="color: green;"> /
                                    </span>{{playlist?.location?.area | uppercase}}</div> -->
                                <button mat-mini-fab (click)="settingPlaylist(playlist,playlist)"
                                    *ngIf="userRole==='STORE' || userRole==='SUBUSER'" class="my-fab">
                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                </button>
                            </div>
                            <div class="content"
                                (click)="userRole==='STORE' || userRole==='SUBUSER'? mediaUpload(playlist):''">
                                <!-- <div class="imgframe"> -->
                                <!-- <img *ngIf="playlist.mediainfo.id=='0'" src="assets/images/playlist/empty.png">
                            <img *ngIf="playlist.mediainfo.id=='1'" src="assets/images/playlist/imagetype.png">
                            <img *ngIf="playlist.mediainfo.id=='2'" src="assets/images/playlist/videotype.png"> -->
                                <!-- <img *ngIf="playlist.mediainfo.id=='3'" src="assets/images/playlist/both.png"> -->

                                <!-- </div> -->
                                <span>
                                    vertical:
                                    {{ "Fill [" + getCountOfSpecificValue(playlist.slot_info?.vertical_slot, "true") +
                                    "]
                                    Empty ["
                                    + getCountOfSpecificValue(playlist.slot_info?.vertical_slot, "false") + "]" }}
                                </span>
                                <div class="seat-box">
                                    <span *ngFor="let o of playlist.slot_info?.vertical_slot">
                                        <div class="seat" [ngClass]="o=='true' ? 'booked' : 'available'">
                                            <i class="fa fa-square" [title]="o=='true' ? 'Filled Slot' : 'Empty Slot'"
                                                aria-hidden="true"></i>
                                        </div>
                                    </span>
                                </div>
                                <span>
                                    Horizontal:
                                    {{ "Fill [" + getCountOfSpecificValue(playlist.slot_info?.horizondal_slot, "true")
                                    + "]
                                    Empty["
                                    + getCountOfSpecificValue(playlist.slot_info?.horizondal_slot, "false") + "]" }}
                                </span>
                                <div class="seat-box">
                                    <span *ngFor="let o of playlist.slot_info?.horizondal_slot">
                                        <div class="seat" [ngClass]="o=='true' ? 'booked' : 'available'">
                                            <i class="fa fa-square" [title]="o=='true' ? 'Filled Slot' : 'Empty Slot'"
                                                aria-hidden="true"></i>
                                        </div>
                                    </span>
                                </div>


                                <div class="indicator">

                                    <p class="onprogress" *ngIf="playlist?.isverified">
                                        Selected by default
                                    </p>

                                    <p class="unscheduled" *ngIf="!playlist?.isverified">
                                        Not selected by default
                                    </p>
                                </div>

                                <div class="titlediv"><span class="title" style="font-size: x-small !important;">
                                        <p style="font-size: x-small !important;"
                                            *ngIf="userRole!='STORE'&&userRole!='SUBUSER'">Store
                                            :{{playlist?.store?.storename}} </p>
                                        <p style="font-size: x-small !important;">Category
                                            :{{playlist.categoryname}} </p>
                                        <!-- <p style="font-size: x-small !important;" *ngIf="!playlist.sch_start_time">
                                            Start Time
                                            : 0000-00-00 00</p>
                                        <p style="font-size: x-small !important;" *ngIf="playlist.sch_start_time">
                                            Start Time
                                            : {{playlist.sch_start_time | date :'medium'}}</p>
                                        <p style="font-size: x-small !important;" *ngIf="!playlist.sch_end_time">End
                                            Time
                                            : 0000-00-00 00</p>
                                        <p style="font-size: x-small !important;" *ngIf="playlist.sch_end_time">End
                                            Time
                                            :{{playlist.sch_end_time | date :'medium'}}</p>
                                        <p style="font-size: x-small !important;" *ngIf="!playlist.duration">
                                            Duration
                                            :0 sec</p>

                                        <p style="font-size: x-small !important;" *ngIf="playlist.duration">Duration
                                            :{{playlist.duration}}</p> -->
                                        <p style="font-size: x-small !important;">Media:{{
                                            "["+playlist.file_count +"]" }}</p>

                                    </span>
                                </div>
                                <div>

                                </div>
                                <div class="tag"><span class="type">{{playlist.filename}}</span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </mat-card-content>
        </mat-card>

    </mat-tab>

</mat-tab-group>


<ng-template #userForm let-data>
    <div class="container p-3">
        <h1 class="text-center">Create {{data}}</h1>
        <form class="example-form" [formGroup]="playlistFormGroup" (ngSubmit)="saveForm()">
            <div>
                <mat-form-field class="example-full-width w-100">
                    <mat-label>Playlist name</mat-label>
                    <input matInput formControlName="playlistname">
                    <mat-error *ngIf="playlistFormGroup.get('playlistname').hasError('required')">
                        Playlist name is <strong>required</strong>
                    </mat-error>
                </mat-form-field>
            </div>

            <mat-form-field style="width: 100%;">
                <mat-label>Choose Category</mat-label>
                <mat-select #selectCategory multiple [(ngModel)]="selectedCategories" formControlName="categorylist">
                    <mat-form-field class="filter-input"
                        style="position: sticky; top: 0px; background: white; z-index: 1000000; width: 100% !important;">
                        <input type="text" #categoryFilterInput matInput (input)="filterCategories($event.target.value)"
                            placeholder="Search...">
                    </mat-form-field>
                    <div class="select-all">
                        <mat-checkbox [(ngModel)]="allCategoriesSelected" [ngModelOptions]="{standalone: true}"
                            (change)="toggleAllCategorySelection()">Select All</mat-checkbox>
                    </div>
                    <mat-option (click)="categoryOptionClick()" [disabled]="category?.id==0"
                        *ngFor="let category of filteredCategoryListDropDown" [value]="category?.id">
                        {{category?.categoryname | titlecase }}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="playlistFormGroup.get('categorylist').hasError('required')">
                    Category is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <!-- <mat-form-field class="example-full-width w-100">
                <mat-label>Select Category</mat-label>
                <mat-select formControlName="categoryid">
                    <mat-option>None</mat-option>
                    <mat-option *ngFor="let v of categoryList" [value]="v.id">{{v.categoryname}}</mat-option>
                </mat-select>
                <mat-error *ngIf="playlistFormGroup.get('categoryid').hasError('required')">
                    Category is <strong>required</strong>
                </mat-error>
            </mat-form-field> -->
            <div style="display: flex; justify-content: center;">
                <button mat-raised-button type="submit" color="primary"
                    [disabled]="!playlistFormGroup.valid">Submit</button>
            </div>
        </form>
    </div>
</ng-template>